<launch>
  <arg name="input/rois_number" default="1"/>
  <!-- HH_230221 -->
  <arg name="input/rois0" default="rois0"/>
  <arg name="input/camera_info0" default="/camera_info0"/>
  
  <arg name="input/clusters" default="clusters"/>
  <arg name="output/clusters" default="labeled_clusters"/>
  <arg name="sync_param_path" default="$(find-pkg-share image_projection_based_fusion)/config/roi_sync.param.yaml"/>
  <arg name="remove_unknown" default="true"/>
  <arg name="trust_distance" default="100.0"/>

  <!-- for eval variable-->
  <arg name="input_rois_number" default="$(var input/rois_number)"/>

  <!-- debug -->
  <arg name="debug_mode" default="false"/>
  <arg name="filter_scope_minx" default="-100"/>
  <arg name="filter_scope_maxx" default="100"/>
  <arg name="filter_scope_miny" default="-100"/>
  <arg name="filter_scope_maxy" default="100"/>
  <arg name="filter_scope_minz" default="-100"/>
  <arg name="filter_scope_maxz" default="100"/>
  <arg name="image_buffer_size" default="15"/>
  <!-- HH_230221 -->
  <arg name="input/image0" default="/image_raw0"/>
  
  <group>
    <!-- HH_230221 -->
    <set_remap if="$(eval &quot;'$(var input_rois_number)' >= '1' &quot;)" from="input/rois0" to="$(var input/rois0)"/>
    <set_remap if="$(eval &quot;'$(var input_rois_number)' >= '1' &quot;)" from="input/camera_info0" to="$(var input/camera_info0)"/>

    <!-- HH_230221 -->
    <set_remap if="$(eval &quot; '$(var input_rois_number)' >= '1' &quot;)" from="input/image_raw0" to="$(var input/image0)"/>

    <node pkg="image_projection_based_fusion" exec="roi_cluster_fusion_node" name="roi_cluster_fusion" output="screen">
      <param name="use_iou" value="true"/>
      <param name="use_iou_x" value="false"/>
      <param name="use_iou_y" value="false"/>
      <param name="iou_threshold" value="0.35"/>
      <param name="rois_number" value="$(var input/rois_number)"/>
      <param name="remove_unknown" value="$(var remove_unknown)"/>
      <param name="trust_distance" value="$(var trust_distance)"/>
      <param from="$(var sync_param_path)"/>
      <remap from="input" to="$(var input/clusters)"/>
      <remap from="output" to="$(var output/clusters)"/>

      <!-- debug -->
      <param name="debug_mode" value="$(var debug_mode)"/>
      <param name="filter_scope_minx" value="$(var filter_scope_minx)"/>
      <param name="filter_scope_maxx" value="$(var filter_scope_maxx)"/>
      <param name="filter_scope_miny" value="$(var filter_scope_miny)"/>
      <param name="filter_scope_maxy" value="$(var filter_scope_maxy)"/>
      <param name="filter_scope_minz" value="$(var filter_scope_minz)"/>
      <param name="filter_scope_maxz" value="$(var filter_scope_maxz)"/>
      <param name="image_buffer_size" value="$(var image_buffer_size)"/>
    </node>
  </group>
</launch>
